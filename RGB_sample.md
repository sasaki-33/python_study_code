

# RGB値から距離の変化を算出する
## 導入
光は大気中のゴミやチリの分子とぶつかり減衰していく。    
光には「光の散乱」という性質があるからである。  
減衰は「光の散乱」により発生し、特に光の波長より小さな粒子による散乱では、光の波長が短いほど散乱される割合が大きい。  
色は光の波長により決まり、可視域では波長が短い光は青色、波長が長い光は赤色に近くなる。  
つまり、波長の短い青色の光は減衰しやすくなる。  
夕焼けもこの原理に基づき発生している。  
![](2021-03-13-22-48-12.png)
>http://andyman.techblog.jp/archives/21102117.html 


*ここで、環境を全く同じ状況とし、光源との距離のみが変化すると仮定したとき、光の減衰によりRGB値は変化するはずである。*  
***
距離の変化として、逆二乗の法則を用いる。  
逆二乗の法則とは、物理量の大きさがその発生源からの距離の二乗に反比例する、という法則である。  
例えば、光源の強さがCd(cd)、観測地との距離をr(m)、観測地での測定した明るさをE(lx)とした時、*E = Cd/r^2*となる。  
これらを用いて同じ環境条件の下、外乱の影響を無視した時のRGB値について  
* R値 = E × exp[x]  = (Cd/r^2) × exp[x] 
* G値 = E × exp[y]  = (Cd/r^2) × exp[y] 
* B値 = E × exp[z]  = (Cd/r^2) × exp[z]     
exp[]はe^を表し、eはネイピア数である。    
x,y,z = -(観測時点での波長-中心波長/正規分布の半値半幅)^2   

## 例
光源が観測地から遠い場所に存在するときのRGB_1値について  
rl = √(Cd/RGB_1値 × exp[] × ρ)   
光源が観測地から近い場所に存在するときのRGB_2値について  
r2 = √(Cd/RGB_2値 × exp[] × ρ)    
このとき、距離変化は、|r1-r2|である。  
(Red,Green,Blueのそれぞれの減衰度を比率として乗じ、距離変化を一意に算出する)